{"mappings":"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","sources":["component/Modules.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\nimport { styled } from '@mui/material/styles';\r\nimport { Box } from '@mui/material'\r\nimport VariablesSingleton from '../Variables';\r\nimport LoadingCircular from '../loading/LoadingCircular';\r\nimport { getProgression } from '../utils/course';\r\nimport Section from '../section';\r\nimport { lessonTypes } from '../data/types';\r\nimport { Button, Text } from '../components/base';\r\n\r\nconst statusIndex = {\r\n    ended: {\r\n        status: \"ended\",\r\n        index: 1\r\n    },\r\n    active: {\r\n        status: \"active\",\r\n        index: 2\r\n    },\r\n    current: {\r\n        status: \"current\",\r\n        index: 3\r\n    },\r\n    locked: {\r\n        status: \"locked\",\r\n        index: 4\r\n    },\r\n}\r\n\r\nexport default ({ ...props }) => {\r\n    // const { courseProgress } = useUser();\r\n    const [loading, setLoading] = useState(true)\r\n    const [modules, setModules] = useState()\r\n    const [progressions, setProgressions] = useState({})\r\n    const [activeStyle, setActiveStyle] = useState({})\r\n    const [endedStyle, setEndedStyle] = useState({})\r\n    const [cours, setCours] = useState()\r\n\r\n    useEffect(() => {\r\n        setModules(VariablesSingleton.getParsed(\"course.modules\", []))\r\n        setCours(VariablesSingleton.getParsed(\"course.guid\"))\r\n        setActiveStyle({ color: props.custom?.activeColor, backgroundColor: props.custom?.activeBackgroundColor })\r\n        setEndedStyle({ color: props.custom?.validatedColor, backgroundColor: props.custom?.validatedBackgroundColor })\r\n        if (VariablesSingleton.getParsed(\"course.guid\", null)) getProgression(VariablesSingleton.getParsed(\"course.guid\"), VariablesSingleton.getParsed(\"global.domain\"), VariablesSingleton.getParsed(\"global.jwt\")).then(res => {\r\n            console.log(\"getProgression\", res)\r\n            setProgressions(res)\r\n            setLoading(false)\r\n        })\r\n    }, [VariablesSingleton.getParsed(\"lesson.guid\")])\r\n\r\n    const parseText = (element, data) => {\r\n        var stringEl = JSON.stringify(element)\r\n        // console.log(stringEl)\r\n        data.map(d => stringEl = stringEl.replaceAll(\"${\" + d.key + \"}\", d.value))\r\n        // console.log(stringEl, data)\r\n        return JSON.parse(stringEl)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setLoading(true)\r\n        console.log(VariablesSingleton.getParsed(\"course.modules\", []))\r\n        const templateString = JSON.stringify(props.header)\r\n        setModules(VariablesSingleton.getParsed(\"course.modules\", [])?.map(m => {\r\n            return {\r\n                ...m,\r\n                template: templateString && JSON.parse((\"\"+templateString).replaceAll(\"${module.name}\", m.name).replaceAll(\"${module.duration}\", m.duration || \"\")),\r\n                lessons: m.lessons?.map(l => {\r\n                    const progress = VariablesSingleton.getParsed(\"lesson.guid\") === l?.guid ? { status: \"current\" } : progressions ? progressions[l?.guid] : { status: \"locked\" }\r\n                    // console.log(\"progress\",  progress)\r\n                    return {\r\n                        ...l, status: progress?.status\r\n                    }\r\n                })\r\n            }\r\n        }))\r\n\r\n        // console.log('VariablesSingleton.getParsed(\"course.modules\")', VariablesSingleton.getParsed(\"course.modules\"))\r\n        setLoading(false)\r\n    }, [progressions])\r\n\r\n    // console.log(\"VariablesSingleton getProgression\", VariablesSingleton.getParsed(\"lesson.guid\"))\r\n    return (\r\n\r\n        <Body className=\"preview w-100\">\r\n\r\n            <LoadingCircular loading={loading}>\r\n                {\r\n                    modules?.map(({ id, name, description, template, lessons, guid }) => {\r\n                    return <>\r\n                        <details key={id} open={true} onClick={(e) => { e.stopPropagation(); }}>\r\n                            {template && <summary>\r\n                                <Section parent={props} data={template}/>\r\n                            </summary>}\r\n                        </details>\r\n                        <div className=\"content-details\" style={{ marginBottom: 15 }}>\r\n                            <Section parent={props} data={{ isNew: true, ...props.body, type: \"column\" }}\r\n                                rawChildren={<table>\r\n                                    <tbody>{(lessons.map((item, index) => {\r\n                                    // return (item.template && <a \r\n                                    //     href={item.status === 'locked' ? \"#\" : `/lesson/${cours}/${item.guid}`}\r\n                                    //     onClick={() => { if (item.status != 'locked') VariablesSingleton.set(\"lesson.guid\", item.guid) }}\r\n                                    //     >\r\n                                    //     <Section parent={props} data={{ md: {w: 12}, sm: {md: 12},\r\n                                    //     id: \"header_\" + props.id, isNew: true, disabled: true, type: \"empty\",\r\n                                    //     children: [item.template]\r\n                                    // }} /></a>)\r\n                                    const progress = progressions ? progressions[item.guid]  : { status: \"locked\"}\r\n                                    const style = item.guid === VariablesSingleton.getParsed(\"lesson.guid\") ? activeStyle : progress?.status === \"ended\" ? endedStyle : {}\r\n                                    // const hasAccess = courseProgress?.status === \"ended\" || order <= courseProgress?.module?.order && item.order <= courseProgress?.lesson?.order || item.access === \"free\";\r\n                                    return <tr className=\"col column_mQK\" style={style}>\r\n                                        <td style={{ width: 40 }}><i className={\"ic icon_74p \" + lessonTypes[item.type]?.icon || \"fa fa-youtube-play\"} style={{ height: '40px', width: '40px' }}></i></td>\r\n                                        <td colSpan={10}><span style={{ height: 'fit-content', fontSize: '16px', fontSize: '14px' }}>{item.name}</span></td>\r\n                                        {!VariablesSingleton.getParsed(\"lesson.guid\") && <>\r\n                                            <td style={{ width: 70 }} className='hide_md'><Button className=\"bt button_OgB\" style={{ textAlign: 'center', fontSize: '12px' }}>Preview</Button></td>\r\n                                            <td style={{ width: 50 }} className='hide_md'><Text style={{ height: 'fit-content', fontSize: '12px' }}>{item.duration} min</Text></td>\r\n                                        </>}\r\n                                        <td style={{ width: 40 }}> <i className=\"ic icon_BWk fa fa-lock\"></i></td>\r\n                                    </tr>\r\n                                }))}</tbody>\r\n                                </table>} />\r\n                        </div>\r\n                    </>\r\n                    })\r\n                }\r\n            </LoadingCircular>\r\n        </Body>)\r\n}\r\n\r\n\r\n//const Body = styled.div`\r\nconst Body = styled(Box)`\r\n/***********************************************/\r\n/********* Details *****************************/\r\n/***********************************************/\r\ndetails {\r\n  overflow: hidden; /* Keep this line to prevent an odd blue outline around the element in Safari. */\r\n }\r\n summary {\r\n  display: block; /* This hides the summary's ::marker pseudo-element */\r\n }\r\n summary::-webkit-details-marker {\r\n  display: none; /* This also hides the ::marker pseudo-element, but in Safari */\r\n }\r\n div.content-details { \r\n  box-sizing: border-box;\r\n  max-height: 0;\r\n  overflow: hidden;\r\n  transition: max-height 200ms ease-out;\r\n }\r\n details[open] + div.content-details {\r\n  max-height: 800px; /* Set a max-height value enough to show all the content */ \r\n  transition: max-height 400ms ease-out, border 0ms linear;\r\n }\r\n details[open] i {\r\n  rotate: 90deg;\r\n  transition: rotate 200ms ease-out;\r\n }\r\n\r\n\r\n.button_OgB {\r\nwidth: fit-content;\r\nborder-color: transparent;\r\nborder-size: 1;\r\nborder-radius: 2px;\r\n}\r\n\r\n.column_mQK {\r\nheight: fit-content;\r\nalign-content: center;\r\nflex-direction: row;\r\nflex-wrap: nowrap;\r\nalign-items: center;\r\npadding-bottom: 0px;\r\npadding-top: 0px;\r\npadding-left: 0px;\r\npadding-right: 0px;\r\n}\r\n\r\n.grid_3JN {\r\nheight: fit-content;\r\nborder-color: rgba(204, 204, 204, 1);\r\nborder-style: solid;\r\npadding-top: 30px;\r\npadding-bottom: 30px;\r\npadding-left: 20px;\r\npadding-right: 20px;\r\nmax-width: 700px;\r\nflex-direction: column;\r\nflex-wrap: nowrap;\r\nborder-width: 1px;\r\n}\r\n\r\n.empty_tVW {\r\nheight: fit-content;\r\nflex-direction: row;\r\ndisplay: flex !important;\r\nflex-wrap: nowrap;\r\nalign-items: center;\r\njustify-content: space-between;\r\n}\r\n\r\n.column_JMa {\r\nheight: fit-content;\r\nalign-content: center;\r\nbackground-color: #F7F9FA;\r\nborder-style: solid;\r\nborder-color: rgba(204, 204, 204, 1);\r\nflex-direction: row;\r\nflex-wrap: nowrap;\r\nalign-items: center;\r\nborder-width: 1px;\r\n}\r\n\r\n.folder_lUN {\r\nheight: fit-content;\r\npadding-bottom: 0px;\r\npadding-left: 0px;\r\npadding-right: 0px;\r\npadding-top: 0px;\r\n}\r\n`"],"names":[],"version":3,"file":"Modules.17f1cd8b.js.map"}